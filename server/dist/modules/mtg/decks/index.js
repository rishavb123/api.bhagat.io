"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDeckList=getDeckList,exports.getStringDeckList=getStringDeckList,exports.getDeckListName=getDeckListName;var _got=_interopRequireDefault(require("got")),_cheerio=_interopRequireDefault(require("cheerio")),_memoryCache=_interopRequireDefault(require("memory-cache"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}async function getHtml(e){let t=_memoryCache.default.get("scryfall-deck-html-"+e);if(!t){t=(await(0,_got.default)(e)).body,_memoryCache.default.put("scryfall-deck-html-"+e,t,6e4)}return t}async function getDeckList(e){const t=await getHtml(e),r=_cheerio.default.load(t),i=e=>r(`.deck-list-entry > .deck-list-entry-${e} > *`),a=e=>e.firstChild.data.trim(),c=i("count"),n=i("name"),o=[];for(let e=0;e<c.length;e++)o.push({link:c[e].attribs.href,count:parseInt(a(c[e])),name:a(n[e])});return o}async function getStringDeckList(e){return(await getDeckList(e)).map(e=>e.count+" "+e.name)}async function getDeckListName(e){const t=await getHtml(e);return _cheerio.default.load(t)("h1")[0].firstChild.data}